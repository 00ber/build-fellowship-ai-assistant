---
phase: 02-workshop-2-materials
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - demos/src/demos/llm-intuition/index.tsx
  - demos/src/demos/llm-intuition/components/SimulatedMode.tsx
  - demos/src/demos/llm-intuition/components/TrainingExamples.tsx
  - demos/src/demos/llm-intuition/components/ProbabilityDisplay.tsx
  - demos/src/demos/llm-intuition/components/GenerationDisplay.tsx
  - demos/src/demos/llm-intuition/components/TemperatureControl.tsx
  - demos/src/demos/llm-intuition/components/Vocabulary.tsx
  - demos/src/demos/llm-intuition/store/useLLMStore.ts
  - demos/src/demos/llm-intuition/utils/probabilityUtils.ts
  - demos/src/app/DemoRegistry.ts
autonomous: true
requirements: [INFR-02]

must_haves:
  truths:
    - "LLM Intuition demo appears in the sidebar and loads when clicked"
    - "Simulated (N-gram) tab is selected by default and shows the existing training examples, probability bars, temperature slider, generation display, and vocabulary"
    - "All N-gram interactions work identically to the original demo — add/remove training sentences, click probability bars to select words, adjust temperature, auto-generate, step back"
    - "Visual styling uses shared design system components (Card, Button, Badge) and Tailwind theme"
    - "Tab UI shows 'Simulated (N-gram)' and 'Live (GPT-4o-mini)' — live tab shows placeholder message when not yet built"
  artifacts:
    - path: "demos/src/demos/llm-intuition/index.tsx"
      provides: "Main LLM Intuition demo with tab switching"
      min_lines: 30
    - path: "demos/src/demos/llm-intuition/components/SimulatedMode.tsx"
      provides: "Orchestrates the 3-column N-gram layout"
      min_lines: 40
    - path: "demos/src/demos/llm-intuition/store/useLLMStore.ts"
      provides: "Zustand store with N-gram state and probability logic"
      min_lines: 100
    - path: "demos/src/app/DemoRegistry.ts"
      provides: "LLM Intuition entry in demo registry"
      contains: "llm-intuition"
  key_links:
    - from: "demos/src/app/DemoRegistry.ts"
      to: "demos/src/demos/llm-intuition/index.tsx"
      via: "lazy import in registry entry"
      pattern: "import.*llm-intuition"
    - from: "demos/src/demos/llm-intuition/index.tsx"
      to: "demos/src/demos/llm-intuition/components/SimulatedMode.tsx"
      via: "tab content rendering"
      pattern: "SimulatedMode"
    - from: "demos/src/demos/llm-intuition/components/SimulatedMode.tsx"
      to: "demos/src/demos/llm-intuition/store/useLLMStore.ts"
      via: "Zustand store hook"
      pattern: "useLLMStore"
---

<objective>
Migrate the existing N-gram LLM demo from scratchpad into the new demo shell, restyled with shared design system components and Tailwind theme. This establishes the LLM Intuition demo with a tab structure ready for the Live mode in Plan 02.

Purpose: The N-gram demo teaches the CONCEPT of token prediction, temperature, and autoregressive generation. It must look and feel like it belongs in the new demo shell, not like a legacy import. This plan delivers the foundation that the live mode tab builds upon.

Output: Working LLM Intuition demo in sidebar with Simulated (N-gram) tab fully functional, Live tab showing placeholder.
</objective>

<execution_context>
@/Users/karkisushant/.claude/get-shit-done/workflows/execute-plan.md
@/Users/karkisushant/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-workshop-2-materials/02-RESEARCH.md
@.planning/phases/02-workshop-2-materials/02-CONTEXT.md
@.planning/phases/01-curriculum-documentation-demo-infrastructure/01-02-SUMMARY.md
@.planning/phases/01-curriculum-documentation-demo-infrastructure/01-03-SUMMARY.md

# Source files to migrate FROM (read these, do NOT modify):
@scratchpad/demos/src/components/TrainingExamples.tsx
@scratchpad/demos/src/components/ProbabilityDisplay.tsx
@scratchpad/demos/src/components/GenerationDisplay.tsx
@scratchpad/demos/src/components/TemperatureControl.tsx
@scratchpad/demos/src/components/Vocabulary.tsx
@scratchpad/demos/src/store/useLLMStore.ts
@scratchpad/demos/src/utils/probabilityUtils.ts

# New demo shell components to USE:
@demos/src/components/ui/Card.tsx
@demos/src/components/ui/Button.tsx
@demos/src/components/ui/Badge.tsx
@demos/src/app/DemoRegistry.ts
@demos/src/app/DemoLayout.tsx
@demos/src/styles/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate N-gram store, utils, and create demo entry point with tab structure</name>
  <files>
    demos/src/demos/llm-intuition/store/useLLMStore.ts
    demos/src/demos/llm-intuition/utils/probabilityUtils.ts
    demos/src/demos/llm-intuition/index.tsx
    demos/src/app/DemoRegistry.ts
  </files>
  <action>
    **Step 1 — Store and utils migration:**
    Copy `scratchpad/demos/src/store/useLLMStore.ts` to `demos/src/demos/llm-intuition/store/useLLMStore.ts`. Copy `scratchpad/demos/src/utils/probabilityUtils.ts` to `demos/src/demos/llm-intuition/utils/probabilityUtils.ts`. These files contain the N-gram logic — do NOT change the logic, only update import paths if needed. The store uses Zustand which is already installed in the demo shell.

    **Step 2 — Demo entry point with tabs:**
    Create `demos/src/demos/llm-intuition/index.tsx` as the main demo component. It must:
    - Accept no props (it receives DemoLayout wrapping from the shell)
    - Show two tabs at the top: "Simulated (N-gram)" and "Live (GPT-4o-mini)"
    - Default to the Simulated tab
    - Simulated tab renders `<SimulatedMode />` (built in Task 2)
    - Live tab renders a placeholder card: "Live mode coming soon — this tab will use a real LLM to show the same token prediction concept with actual probabilities." Use the Card component from `components/ui/Card.tsx`.
    - Tab styling: use Tailwind utility classes for a clean tab bar. Active tab gets indigo bottom border + text, inactive gets gray text. Pattern: `border-b-2 border-primary-500 text-primary-600` for active, `text-gray-500 hover:text-gray-700` for inactive.

    **Step 3 — Registry entry:**
    Update `demos/src/app/DemoRegistry.ts`:
    - Add the LLM Intuition demo entry BEFORE the placeholder entry
    - id: `'llm-intuition'`
    - title: `'LLM Intuition'`
    - subtitle: `'How language models predict the next token'`
    - icon: Use `Brain` from lucide-react (import it)
    - component: `lazy(() => import('../demos/llm-intuition/index.tsx'))`
    - ahaStatement: `'Language models don\'t understand — they predict the most likely next token based on patterns in training data'`
    - instructions: Include 4 steps covering: (1) view training data, (2) observe probability bars, (3) adjust temperature, (4) generate text and watch the autoregressive loop
  </action>
  <verify>
    Run `cd /Users/karkisushant/workspace/build-fellowship-ai-assistant/demos && npx tsc --noEmit` to verify TypeScript compiles (the SimulatedMode import will error — that's expected since it's built in Task 2, but the store and utils should compile cleanly). Verify the store file exists and has the Zustand create() call. Verify the registry has the new entry.
  </verify>
  <done>
    Store and probability utils are migrated. Demo entry point exists with working tab UI. Registry entry exists so the demo will appear in the sidebar once Task 2 provides SimulatedMode.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate and restyle all N-gram display components using shared design system</name>
  <files>
    demos/src/demos/llm-intuition/components/SimulatedMode.tsx
    demos/src/demos/llm-intuition/components/TrainingExamples.tsx
    demos/src/demos/llm-intuition/components/ProbabilityDisplay.tsx
    demos/src/demos/llm-intuition/components/GenerationDisplay.tsx
    demos/src/demos/llm-intuition/components/TemperatureControl.tsx
    demos/src/demos/llm-intuition/components/Vocabulary.tsx
  </files>
  <action>
    Migrate each component from `scratchpad/demos/src/components/` to `demos/src/demos/llm-intuition/components/`. For each component:

    1. **Read the original** from scratchpad
    2. **Preserve ALL interaction logic** — event handlers, state connections to useLLMStore, conditional rendering, animations
    3. **Replace CSS classes** with shared components + Tailwind utilities:
       - `.card` → `<Card>` component from `../../components/ui/Card.tsx` (adjust import path)
       - `.btn-primary` → `<Button variant="primary">` from `../../components/ui/Button.tsx`
       - `.probability-bar` / `.probability-bar-fill` → Tailwind utility classes: `h-8 rounded-md bg-primary-100` for track, `bg-primary-500 rounded-md transition-all duration-300` for fill, using inline `style={{ width: \`${pct}%\` }}` for dynamic width
       - `.word-pill` → Tailwind: `inline-flex items-center px-2 py-1 rounded-full text-sm font-medium bg-primary-50 text-primary-700`
       - `.pattern-match` → Tailwind: `bg-green-100 text-green-800 rounded px-1`
    4. **Update imports** to point to new store/utils paths within the llm-intuition directory

    **SimulatedMode.tsx** (NEW — orchestrator component):
    Create this as the layout wrapper for the N-gram mode. It arranges the components in a responsive grid:
    - Use CSS grid: `grid grid-cols-1 lg:grid-cols-12 gap-4`
    - Left column (lg:col-span-3): TrainingExamples + Vocabulary stacked
    - Center column (lg:col-span-5): ProbabilityDisplay + TemperatureControl stacked
    - Right column (lg:col-span-4): GenerationDisplay
    - On medium screens, collapse to 2 columns: `md:grid-cols-6`
    - On small screens, single column
    - This replaces the grid layout that was previously in the scratchpad App.tsx

    **Key restyling notes per component:**
    - TrainingExamples: Use Card for the container, Button for add/clear/defaults actions, keep the animated green highlight for pattern matches
    - ProbabilityDisplay: Keep the horizontal probability bars — these are the visual centerpiece. Use Card container. Keep click-to-select interaction. Keep the "Random Sample" and "Auto Generate" buttons using Button component.
    - GenerationDisplay: Use Card container. Keep the word pills and step-by-step history. Keep the flying word animation if Framer Motion is available (it is in the demo shell).
    - TemperatureControl: Use Card container. Keep the custom slider with gradient fill. Keep the low/medium/high explanation cards using Badge component for the range labels.
    - Vocabulary: Use Card container. Simple word grid.

    After migration, ensure ALL the original N-gram demo interactions work: adding sentences, clicking probability bars, temperature adjustment, auto-generation, stepping back, pattern highlighting.
  </action>
  <verify>
    Run `cd /Users/karkisushant/workspace/build-fellowship-ai-assistant/demos && npx tsc --noEmit` — zero errors. Then run `npm run build` to verify the production build succeeds. Start the dev server with `npm run dev` and verify at http://localhost:5173/#/llm-intuition that:
    1. The demo loads in the sidebar
    2. Simulated tab is active by default
    3. Training examples show default sentences
    4. Probability bars display and are clickable
    5. Temperature slider adjusts the distribution
    6. Auto-generate produces text word by word
  </verify>
  <done>
    All 5 N-gram components migrated and restyled. SimulatedMode orchestrates the layout. The full N-gram demo works identically to the original but uses shared Card, Button, Badge components and Tailwind theme. The Live tab shows a placeholder. The demo builds with zero TypeScript errors.
  </done>
</task>

</tasks>

<verification>
1. `cd demos && npm run build` succeeds with zero errors
2. Demo appears in sidebar as "LLM Intuition" with Brain icon
3. Clicking it loads the tabbed interface with Simulated tab active
4. All N-gram interactions work: add/remove training data, probability bar selection, temperature adjustment, auto-generate, step-back, generation history
5. Visual styling matches the design system (indigo theme, Inter/JetBrains Mono fonts, Card shadows)
6. Live tab shows placeholder message in a Card
7. Responsive: 3-column on large screens, collapsing gracefully on smaller screens
</verification>

<success_criteria>
The N-gram LLM demo is migrated into the new demo shell with all original interactions preserved and visual styling matching the shared design system. The tab structure is in place for the Live mode to be added in Plan 02.
</success_criteria>

<output>
After completion, create `.planning/phases/02-workshop-2-materials/02-01-SUMMARY.md`
</output>
